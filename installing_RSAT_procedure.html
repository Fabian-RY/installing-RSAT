<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Jacques van Helden" />

<meta name="date" content="2019-05-19" />

<title>Installing RSAT</title>

<script src="installing_RSAT_procedure_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="installing_RSAT_procedure_files/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="installing_RSAT_procedure_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="installing_RSAT_procedure_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="installing_RSAT_procedure_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="installing_RSAT_procedure_files/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="installing_RSAT_procedure_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="installing_RSAT_procedure_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="installing_RSAT_procedure_files/navigation-1.1/tabsets.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  { color: #cccccc; background-color: #303030; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ffcfaf; } /* Alert */
code span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #dca3a3; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #f0dfaf; } /* ControlFlow */
code span.ch { color: #dca3a3; } /* Char */
code span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
code span.co { color: #7f9f7f; } /* Comment */
code span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
code span.do { color: #7f9f7f; } /* Documentation */
code span.dt { color: #dfdfbf; } /* DataType */
code span.dv { color: #dcdccc; } /* DecVal */
code span.er { color: #c3bf9f; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #c0bed1; } /* Float */
code span.fu { color: #efef8f; } /* Function */
code span.im { } /* Import */
code span.in { color: #7f9f7f; font-weight: bold; } /* Information */
code span.kw { color: #f0dfaf; } /* Keyword */
code span.op { color: #f0efd0; } /* Operator */
code span.ot { color: #efef8f; } /* Other */
code span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
code span.sc { color: #dca3a3; } /* SpecialChar */
code span.ss { color: #cc9393; } /* SpecialString */
code span.st { color: #cc9393; } /* String */
code span.va { } /* Variable */
code span.vs { color: #cc9393; } /* VerbatimString */
code span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' || rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->



<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Installing RSAT</h1>
<h4 class="author">Jacques van Helden</h4>
<h4 class="date">2019-05-19</h4>

</div>


<hr />
<div id="introduction" class="section level1">
<h1><span class="header-section-number">1</span> Introduction</h1>
<hr />
</div>
<div id="overview-of-the-installation-steps" class="section level1">
<h1><span class="header-section-number">2</span> Overview of the installation steps</h1>
<ol style="list-style-type: decimal">
<li>Download a tarball archive with RSAT code.</li>
<li>Configure your local installation.</li>
<li>If your OS is Ubuntu, run the installation bash scripts. If not some adaptation of these scripts will be necessary (e.g. system libraries).</li>
<li>Test the command lines</li>
<li>Test the Web server</li>
<li>Test the Web services (SOAP/WSDL and REST)</li>
</ol>
<hr />
</div>
<div id="downloading-rsat" class="section level1">
<h1><span class="header-section-number">3</span> Downloading RSAT</h1>
<ol style="list-style-type: decimal">
<li>Go to the RSAT portal (<strong><a href="http://rsat.eu/" class="uri">http://rsat.eu/</a></strong>)</li>
<li>Select any server.</li>
<li>In the left-sided menu, click on the <strong>Download</strong> link.</li>
<li>Fill in your name and coordinates and access to the download site.</li>
</ol>
<p>You now have access to the download page containing the links to</p>
<ul>
<li><p>the latest stable release named <code>rsat_20XX-XX-XX.tar.gz</code> (XX-XX-XX must be replaced by the release date).</p></li>
<li><p>the previous release archives available in the folder <code>previous_versions</code>.</p></li>
</ul>
<div id="downloading-the-latest-rsat-release-via-the-web-installer" class="section level2">
<h2><span class="header-section-number">3.1</span> Downloading the latest RSAT release via the Web installer</h2>
<ol start="5" style="list-style-type: decimal">
<li>Download the tar archive named</li>
</ol>
<p><code>rsat_20XX-XX-XX.tar.gz</code></p>
<p>where <code>XX-XX-XX</code> is the latest release date and put it in your chosen directory.</p>
<ol start="6" style="list-style-type: decimal">
<li>Uncompress the archive. This will create a directory named <code>rsat</code> where we will continue the install procedure.</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="bu">export</span> <span class="va">RELEASE=</span>20XX.XX.XX</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="co">## e.g. export RELEASE=2018.12.03</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co">## By default we install the package a folder named packages. </span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="co">## This should be adapted according to your local setup. </span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="bu">export</span> <span class="va">INSTALL_ROOT=</span>~/packages</a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="fu">mkdir</span> -p <span class="va">${INSTALL_ROOT}</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="co">## Download the archive from the RSAT distribution site</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="bu">export</span> <span class="va">DOWNLOAD_BASE=</span>http://pedagogix-tagc.univ-mrs.fr/download_rsat</a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="bu">export</span> <span class="va">RSAT_TGZ=</span>rsat_<span class="va">${RELEASE}</span>.tar.gz</a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="bu">export</span> <span class="va">DOWNLOAD_URL=${DOWNLOAD_BASE}</span>/<span class="va">${RSAT_TGZ}</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="bu">echo</span> <span class="st">&quot;Downloading RSAT from URL\t</span><span class="va">${DOWNLOAD_URL}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="fu">wget</span> --no-clobber <span class="va">${DOWNLOAD_URL}</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="fu">tar</span> -C <span class="va">${INSTALL_ROOT}</span>/ -xpvzf <span class="va">${RSAT_TGZ}</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="bu">cd</span> <span class="va">${INSTALL_ROOT}</span>/rsat</a></code></pre></div>
<hr />
</div>
</div>
<div id="configuring-your-local-rsat-instance" class="section level1">
<h1><span class="header-section-number">4</span> Configuring your local RSAT instance</h1>
<p>We will start by auto-configuring RSAT in order to deine suitable basic parameters.</p>
<div id="getting-the-ip-address-of-your-machine" class="section level2">
<h2><span class="header-section-number">4.1</span> Getting the IP address of your machine</h2>
<p>Replace [your.server.IP] by the actual IP address of your server. (e.g.: for Virtualbox Virtual Machines, we set the IP to 192.168.56.101).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co">## Get your IP address and check if it is 192.168.56.101</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="ex">ifconfig</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;inet &#39;</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="bu">export</span> <span class="va">MY_IP=</span>XXX.XXX.XXX.XXX</a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">## e.g. export MY_IP=192.168.56.101</span></a></code></pre></div>
<p>Note: if you install RSAT on a personal PC (e.g. a laptop) and intend to use it only from this machine, you can configure it with the local network.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co">## Configure RSAT to be used internally inly</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">export MY_IP=<span class="dv">127</span>.<span class="dv">0</span>.<span class="fl">0.1</span></a></code></pre></div>
</div>
<div id="choose-a-site-name-for-your-rsat-instance" class="section level2">
<h2><span class="header-section-number">4.2</span> Choose a site name for your RSAT instance</h2>
<p>You can choose an arbitrary name for your RSAT instance. For this tutorial, we will call it “my_rsat”, but you are welcome to use another site name.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="bu">export</span> <span class="va">RSAT_SITE=</span>my_rsat</a></code></pre></div>
</div>
<div id="automatic-configuration-of-rsat-parameters" class="section level2">
<h2><span class="header-section-number">4.3</span> Automatic configuration of RSAT parameters</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" data-line-number="1"></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co">## Check that the IP site of your machine has been specified</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="bu">export</span> <span class="va">RSAT=${INSTALL_ROOT}</span>/rsat</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="bu">echo</span> <span class="st">&quot;RSAT </span><span class="va">${RSAT}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">## Check that the IP site of your machine has been specified</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="bu">echo</span> <span class="st">&quot;MY_IP </span><span class="va">${MY_IP}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">## Check that you defined a site name for your RSAT instance</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="bu">echo</span> <span class="st">&quot;RSAT_SITE </span><span class="va">${RSAT_SITE}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">## Semi-auto configuration for VirtualBox VM</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">## (adapt IP address if required)</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="fu">perl</span> perl-scripts/configure_rsat.pl -auto  \</a>
<a class="sourceLine" id="cb5-15" data-line-number="15">  rsat=<span class="va">${RSAT}</span> \</a>
<a class="sourceLine" id="cb5-16" data-line-number="16">  rsat_site=<span class="va">${RSAT_SITE}</span> \</a>
<a class="sourceLine" id="cb5-17" data-line-number="17">  rsat_www=http://<span class="va">${MY_IP}</span>/rsat/ \</a>
<a class="sourceLine" id="cb5-18" data-line-number="18">  rsat_ws=http://<span class="va">${MY_IP}</span>/rsat/ \</a>
<a class="sourceLine" id="cb5-19" data-line-number="19">  ucsc_tools=1 \</a>
<a class="sourceLine" id="cb5-20" data-line-number="20">  ensembl_tools=1</a></code></pre></div>
<p>You can add some additional options to the previous command, e.g. enter your mail address as server admin, activate some specific tools that are disabled by default.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="va">rsat_server_admin=</span>your.mail<span class="ex">@your.mail.server</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="va">variation_tools=</span>1</a></code></pre></div>
<!--

## For the IFB cloud

RSAT has been ported on the cloud of the [**Institut Français de Bioinformatique**](http://www.france-bioinformatique.fr) (**IFB**). The tools are available as an appliance which enables each user to automatically start an RSAT server, that can be used in a terminal, via a Web interface, or invoked remotely as Web services. 


Since the IP address is allocated dynamically during at the start of the instance booting, we use an automatic configuration. 


```bash
perl perl-scripts/configure_rsat.pl -auto  \
  rsat_site=rsatvm-ifb-2018-05 \
  RSAT=${INSTALL_ROOT}/rsat \
  rsat_www=auto \
  rsat_ws=auto \
  phylo_tools=0 \
  compara_tools=0 \
  variations_tools=0 \
  ucsc_tools=0 \
  ensembl_tools=0 \
  SUDO=sudo
  
chmod 755 /root # required for apache user to access the packages
```
-->
</div>
<div id="advanced-rsat-configuration" class="section level2">
<h2><span class="header-section-number">4.4</span> Advanced RSAT configuration</h2>
<p>In order to see all options, you can run the script <code>configure_rsat.pl</code> without the option <code>--auto</code></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="fu">perl</span> perl-scripts/configure_rsat.pl</a></code></pre></div>
<p>You can now refine the configuration by choosing custom parameter to your RSAT instance (for example the email of the local admin, the organism group, …).</p>
<hr />
</div>
</div>
<div id="installing-rsat" class="section level1">
<h1><span class="header-section-number">5</span> Installing RSAT</h1>
<p>Before running the installation, it might be worth updating the Linux distribution (<code>apt-get update</code>) in order to get the latest versions of the basic packages.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co">## This requires admin privileges</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="fu">sudo</span> bash</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">## Check who you are  (should be root)</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="fu">whoami</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">## Define your operating system (currently supported: ubuntu, macosx) by running one (and only one) of the commands below. </span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="bu">export</span> <span class="va">MY_OS=</span>macosx</a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="bu">export</span> <span class="va">MY_OS=</span>ubuntu</a>
<a class="sourceLine" id="cb8-10" data-line-number="10"></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="co">## Go to the RSAT directory</span></a>
<a class="sourceLine" id="cb8-13" data-line-number="13"><span class="bu">export</span> <span class="va">INSTALL_ROOT=</span>~/packages</a>
<a class="sourceLine" id="cb8-14" data-line-number="14"><span class="bu">cd</span> <span class="va">${INSTALL_ROOT}</span>/rsat</a>
<a class="sourceLine" id="cb8-15" data-line-number="15"></a>
<a class="sourceLine" id="cb8-16" data-line-number="16"><span class="co">## Read config and run bash installation scripts</span></a>
<a class="sourceLine" id="cb8-17" data-line-number="17"><span class="bu">source</span> RSAT_config.bashrc <span class="kw">&amp;&amp;</span> <span class="ex">\ </span></a>
<a class="sourceLine" id="cb8-18" data-line-number="18"><span class="fu">bash</span> installer/01_<span class="va">${MY_OS}</span>_packages.bash <span class="kw">&amp;&amp;</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb8-19" data-line-number="19"><span class="fu">bash</span> installer/02_python_packages.bash  <span class="kw">&amp;&amp;</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb8-20" data-line-number="20"><span class="fu">bash</span> installer/03_install_rsat.bash <span class="kw">&amp;&amp;</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb8-21" data-line-number="21"><span class="fu">bash</span> installer/04_perl_packages.bash  <span class="kw">&amp;&amp;</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb8-22" data-line-number="22"><span class="fu">bash</span> installer/06_install_organisms.bash <span class="kw">&amp;&amp;</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb8-23" data-line-number="23"><span class="fu">bash</span> installer/07_R-and-packages.bash  <span class="kw">&amp;&amp;</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb8-24" data-line-number="24"><span class="fu">bash</span> installer/08_apache_config.bash <span class="kw">&amp;&amp;</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb8-25" data-line-number="25"><span class="fu">bash</span> installer/09_rsat_ws.bash <span class="kw">&amp;&amp;</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb8-26" data-line-number="26"><span class="fu">bash</span> installer/10_clean_unnecessary_files.bash</a>
<a class="sourceLine" id="cb8-27" data-line-number="27"></a>
<a class="sourceLine" id="cb8-28" data-line-number="28"><span class="co">## Restore rsat as owner of the $RSAT folder</span></a>
<a class="sourceLine" id="cb8-29" data-line-number="29"><span class="co">## </span><span class="al">NOTE</span><span class="co">: the following command should be adapted to the login and group of the user owing the rsat package.</span></a>
<a class="sourceLine" id="cb8-30" data-line-number="30"><span class="fu">chown</span> -R rsat.rsat <span class="va">$RSAT</span></a>
<a class="sourceLine" id="cb8-31" data-line-number="31"></a>
<a class="sourceLine" id="cb8-32" data-line-number="32"><span class="co">## Exit sudo session</span></a>
<a class="sourceLine" id="cb8-33" data-line-number="33"><span class="bu">exit</span></a>
<a class="sourceLine" id="cb8-34" data-line-number="34"></a>
<a class="sourceLine" id="cb8-35" data-line-number="35"><span class="co">## Check who you are (should be back to normal user identity)</span></a>
<a class="sourceLine" id="cb8-36" data-line-number="36"><span class="fu">whoami</span> <span class="co">## This should give &#39;rsat&#39;</span></a></code></pre></div>
<hr />
</div>
<div id="testing-the-command-lines" class="section level1">
<h1><span class="header-section-number">6</span> Testing the command lines</h1>
<p>The script <code>makefile/install_tests.mk</code> runs a series of tests for different components of the <em>RSAT</em> suite. Each test result is stored in a separate file in the test directory (<code>./install_tests</code> by default). Output file names are printed out after each test.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co">## Load the RSAT configuration</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="bu">source</span> RSAT_config.bashrc</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="bu">cd</span> <span class="va">$RSAT</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="fu">make</span> -f makefiles/install_tests.mk all</a>
<a class="sourceLine" id="cb9-6" data-line-number="6"></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">## Check the results</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="fu">ls</span> -ltr install_tests</a></code></pre></div>
<hr />
</div>
<div id="testing-the-web-server" class="section level1">
<h1><span class="header-section-number">7</span> Testing the Web server</h1>
<p>The RSAT Web site can be found at your host IP address followed by rsat: <a href="http://%5Bmy.computer.ip.address%5D/rsat/" class="uri">http://[my.computer.ip.address]/rsat/</a></p>
<p>e.g. for VirtualBox VM: <a href="http://192.168.56.101/rsat/" class="uri">http://192.168.56.101/rsat/</a></p>
<p>The web site can be tested by selecting any supported tool, clicking on the demo button and checking the result.</p>
<p>We usually use the following tools as diagnostic of the proper functioning of a server.</p>
<ol style="list-style-type: decimal">
<li><p><strong>Supported organisms</strong> to check if the default organisms have been installed.</p></li>
<li><p><strong>Fetch sequences from UCSC</strong>:</p>
<ul>
<li>is the list of organisms is correctly displayed (obtained dynamically from UCSC) ?</li>
<li>run the demo: do you obtain fasta sequences ?</li>
</ul></li>
<li><p><strong>retrieven Ensembl seq</strong>:</p>
<ul>
<li>is the list of organisms is correctly displayed (obtained dynamically from Ensembl) ?</li>
<li>run the demo 1 (single organism): do you obtain fasta sequences ?</li>
</ul></li>
<li><p><strong>convert-matrix</strong>: check that logos are properly generated</p></li>
<li><p><strong>gene-info</strong> to <strong>feature-map</strong>: check that the genes are well returned with gene-info, then successively send the results throught the following tools:</p>
<ul>
<li><p><strong>gene-info</strong> demo -&gt; gene list. Check if you obtain a table with genes. If so, under <em>Next steps</em>, click the button <em>retrieve sequences</em>.</p></li>
<li><p><strong>retrieve sequences</strong>. Click “Run Analysis” then “GO”. In the result, check the fasta file. Next step: <em>oligo-analysis</em>.</p></li>
<li><p><strong>oligo-analysis</strong>. In the result, check the k-mers (oligos) then the matrices and the logos. In the Next step box, end the result to <em>string-based pattern matching</em>.</p></li>
<li><p><strong>dna-pattern</strong></p></li>
<li><p><strong>feature-map</strong> check that the png figure is properly generated and displayed.</p></li>
</ul></li>
</ol>
<p>At the end of this process the results should look like the figure below.</p>
<div class="figure" style="text-align: center">
<img src="images/feature-map_web_result.png" alt="**Feature-map result** at the end of the pipeline from *gene-info* to *feature-map*." width="60%" />
<p class="caption">
<strong>Feature-map result</strong> at the end of the pipeline from <em>gene-info</em> to <em>feature-map</em>.
</p>
</div>
</div>
<div id="testing-the-web-services" class="section level1">
<h1><span class="header-section-number">8</span> Testing the Web services</h1>
<div id="soapwsdl-interface" class="section level2">
<h2><span class="header-section-number">8.1</span> SOAP/WSDL interface</h2>
</div>
<div id="rest-interface" class="section level2">
<h2><span class="header-section-number">8.2</span> REST interface</h2>
<!-- **************************************************************** -->
<!-- # Supplementary information -->
<!-- ## Files -->
<!-- Stand-alone version + web servers for RSAT -->
<!-- `rsat_YYYY.MM.DD.tar.gz` -->
<!-- Metabolic pathway analysis tools (previously supported on the NeAT server, not maintained anymore). -->
<!-- `metabolic-tools_YYYYMMDD.tar.gz` -->
<!-- ## RSAT installation and user guides -->
<!-- After having uncompressed the archive, you will find the installation and user guides in the `doc/manuals` directory -->
<!-- ```{bash} -->
<!-- ls -1 public_html/release/*.pdf -->
<!-- ``` -->
<!-- | Guide | File | -->
<!-- |------------------------|---------------------------| -->
<!-- | RSAT installation guide |   RSAT_install_guide.pdf | -->
<!-- | RSAT Web configuration guide |   rsat_web_server.pdf | -->
<!-- | RSAT Command-linde user guide |  tutorial_shell_rsat.pdf | -->
<!-- | NeAT Web server configuration |  neat_web_server.pdf | -->
<!-- | NeAT Command-line user guide |   neat_tutorial.pdf | -->
<!-- **************************************************************** -->
<!-- Define an environment variable specifying the path of RSAT directory -->
<!-- ```{bash} -->
<!-- ## Go th the main RSAT directory -->
<!-- cd ${RSAT} -->
<!-- ## Parameters to change -->
<!-- ##   rsat_site   rsat-vm-2016-03 -->
<!-- ##   rsat_server_admin    I don't specify it, because I don't want to receive notifications from all the VMs -->
<!-- ## I activate the optional tools ucsc_tools and ensembl_tools, but not the other ones because they require many genomes (phylo tools) or big genomes (compara_tools, variation_tools). -->
<!-- ## Load the (updated) RSAT environment variables -->
<!-- cd ${RSAT}; source RSAT_config.bashrc -->
<!-- ## Check that the RSAT environment variable has been properly -->
<!-- ## configured. Note: I also define it in the beginning of the script -->
<!-- ## because I will beed it for the different installation chunks. -->
<!-- echo "RSAT path: ${RSAT}" -->
<!-- cd ${RSAT} -->
<!-- ## Initialise RSAT folders -->
<!-- make -f makefiles/init_rsat.mk init -->
<!-- ################################################################ -->
<!-- ## Next steps require to be done as rsat administrator user -->
<!-- ## compile RSAT programs written in C -->
<!-- cd ${RSAT} -->
<!-- make -f makefiles/init_rsat.mk compile_all -->
<!-- df -m > ${RSAT}/install_logs/df_$(date +%Y-%m-%d_%H-%M-%S)_rsat_app_compiled.txt -->
<!-- ## !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
<!-- ## !!!!!!!!!!!!!!!!!!!!!!!!!!!  BUG    !!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
<!-- ## !!!! I HAVE A PROBLEM TO COMPILE KWALKS. SHOULD BE CHECKED !!!!! -->
<!-- ## !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
<!-- ################################################################ -->
<!-- ## Install some third-party programs required by some RSAT scripts. -->
<!-- cd ${RSAT} -->
<!-- make -f makefiles/install_software.mk list_ext_apps -->
<!-- make -f makefiles/install_software.mk install_ext_apps -->
<!-- df -m > ${RSAT}/install_logs/df_$(date +%Y-%m-%d_%H-%M-%S)_rsat_extapp_installed.txt -->
<!-- ``` -->
<!-- # Dependencies -->
<!-- ## mkvtree and vmatch -->
<!-- The RSAT program `purge-sequences` is used to mask redundant sequences, which is strongly recommended before running motif discovery, since the over-representation statistics rely on the hypothesis of independence.  -->
<!-- This perl script relies on the tools `mkvtree` and `vmatch` developed by Stefan Kurtz.  -->
<!-- ```{bash eval=FALSE} -->
<!-- cd ${RSAT} -->
<!-- ## List dependencies for external applications -->
<!-- make -f makefiles/install_software.mk list_ext_apps -->
<!-- ## Install -->
<!-- make -f makefiles/install_software.mk install_vmatch -->
<!-- ``` -->
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
